# ШРИ 2021. Виджеты тудушки и календаря в почте

**[Технический отчет](https://wiki.yandex.ru/shri-2021/project-27-widgets/)**

## Запуск

Должно запускаться на nodejs >= 14.

1. Склонировать себе репозиторий
2. `nvm use`
3. `npm ci`
4. Сделать запись в `hosts` (mac/linux `/etc/hosts`, windows `%SystemRoot%\system32\drivers\etc\hosts`)
```
127.0.0.1 shri.mail.yandex.ru
```
5. `npm start`
6. [Открыть в браузере](https://shri.mail.yandex.ru) `https://shri.mail.yandex.ru`
7. Согласиться с тем, что сертификат не проходит проверку, но вы всё равно хотите войти

**Важно!** Нужно быть залогиненным на Яндекс Почте. Если учётной записи ещё нет, её можно завести [здесь](https://passport.yandex.ru).

**Может пригодиться:** В chrome на экране с предупреждением о сертификате может не быть кнопки перехода. Чтобы решить эту проблему можно набрать `thisisunsafe`

## Docker

Сборка докер образа 

```
docker build --build-arg api_base_url=/web-api/models/liza1 -t shri_widgets . 
```

Запуск контейнера

```
docker run -p=443:443 -p=80:80 shri_widgets
```

## Линтеры

Запуск

```
npm run lint
```

## Тесты

Запуск

```
npm run test
```

**Важно!** Для корректного выполнения e2e тестов необходимо не забыть запустить проект `npm start`

## Themekit


Для стилизации компонентов лего под макеты, было решено переопределить тему на уровне виджета. 
В папке themes, лежат файлы конфига и токены для генерации CSS переменных.

**Сборка тем для виджетов**

```
themekit build
```

**Важно!** Перед запуском npm start, производится генерация тем.
